<!--pages/device/device.wxml - è®¾å¤‡è¯¦æƒ…é¡µé¢ï¼ˆå¤©æ°”æ—¶é’Ÿä¸»ç•Œé¢ï¼‰-->
<view class="container">
  <!-- é¡¶éƒ¨è®¾å¤‡ä¿¡æ¯ -->
  <view class="device-header">
    <view class="device-title-row">
      <text class="device-name">{{device.name || 'å¤ªç©ºäººæ—¶é’Ÿ'}}</text>
      <view class="device-status {{device.online ? 'online' : 'offline'}}">
        <view class="status-dot"></view>
        <text>{{device.online ? 'åœ¨çº¿' : 'ç¦»çº¿'}}</text>
      </view>
    </view>
    <view class="device-meta">
      <text class="device-id">{{device.deviceId}}</text>
      <text class="device-ip">IP: {{device.ip}}</text>
    </view>
  </view>

  <!-- å¤©æ°”å¡ç‰‡ -->
  <view class="weather-card">
    <view class="weather-bg"></view>
    <view class="weather-content">
      <view class="weather-header">
        <view class="location">
          <text class="city">{{weather.city || 'æœªçŸ¥åŸå¸‚'}}</text>
          <text class="update-time">æ›´æ–°äº {{weather.updateTime || '--:--'}}</text>
        </view>
      </view>

      <view class="weather-main">
        <view class="temp-display">
          <text class="temperature">{{weather.temp || '--'}}</text>
          <text class="temp-unit">Â°</text>
        </view>
        <text class="weather-desc">{{weather.weather || 'æœªçŸ¥'}}</text>
      </view>

      <view class="weather-details">
        <view class="detail-item">
          <text class="detail-icon">ğŸ’§</text>
          <text class="detail-value">{{weather.humidity || '--'}}%</text>
          <text class="detail-label">æ¹¿åº¦</text>
        </view>
        <view class="detail-item">
          <text class="detail-icon">ğŸŒ¬ï¸</text>
          <text class="detail-value">{{weather.wind || '3çº§'}}</text>
          <text class="detail-label">é£åŠ›</text>
        </view>
        <view class="detail-item">
          <text class="detail-icon">ğŸŒ¡ï¸</text>
          <text class="detail-value">{{weather.aqi || 'ä¼˜'}}</text>
          <text class="detail-label">ç©ºæ°”</text>
        </view>
      </view>
    </view>

    <!-- å¤ªç©ºäººåŠ¨ç”» -->
    <view class="astronaut-container">
      <image class="astronaut-img" src="/images/astronaut.png" mode="aspectFit"></image>
    </view>

    <!-- æ—¶é—´æ˜¾ç¤º -->
    <view class="time-display">
      <text class="time-value">{{currentTime}}</text>
      <text class="date-value">{{currentDate}}</text>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½å…¥å£ -->
  <view class="quick-actions">
    <view class="action-card" bindtap="goToSchedule">
      <view class="action-icon">ğŸ“…</view>
      <view class="action-info">
        <text class="action-title">æ—¥ç¨‹æé†’</text>
        <text class="action-desc">{{scheduleCount}}ä¸ªå¾…åŠäº‹é¡¹</text>
      </view>
      <text class="action-arrow">â€º</text>
    </view>

    <view class="action-card" bindtap="goToPomodoro">
      <view class="action-icon">ğŸ…</view>
      <view class="action-info">
        <text class="action-title">ä¸“æ³¨æ¨¡å¼</text>
        <text class="action-desc">ä»Šæ—¥ä¸“æ³¨ {{focusMinutes}} åˆ†é’Ÿ</text>
      </view>
      <text class="action-arrow">â€º</text>
    </view>

    <view class="action-card" bindtap="goToStats">
      <view class="action-icon">ğŸ“Š</view>
      <view class="action-info">
        <text class="action-title">ä¸“æ³¨ç»Ÿè®¡</text>
        <text class="action-desc">æŸ¥çœ‹è¯¦ç»†æ•°æ®åˆ†æ</text>
      </view>
      <text class="action-arrow">â€º</text>
    </view>
  </view>

  <!-- è®¾å¤‡è®¾ç½® -->
  <view class="settings-section">
    <view class="section-title">è®¾å¤‡è®¾ç½®</view>
    <view class="settings-list">
      <view class="setting-item" bindtap="setCityCode">
        <text class="setting-icon">ğŸŒ</text>
        <text class="setting-label">å¤©æ°”åŸå¸‚</text>
        <text class="setting-value">{{weather.city || 'ç‚¹å‡»è®¾ç½®'}}</text>
        <text class="setting-arrow">â€º</text>
      </view>
      <view class="setting-item" bindtap="refreshData">
        <text class="setting-icon">ğŸ”„</text>
        <text class="setting-label">åˆ·æ–°æ•°æ®</text>
        <text class="setting-value"></text>
        <text class="setting-arrow">â€º</text>
      </view>
      <view class="setting-item danger" bindtap="showUnbindConfirm">
        <text class="setting-icon">ğŸ—‘ï¸</text>
        <text class="setting-label">è§£é™¤ç»‘å®š</text>
        <text class="setting-value"></text>
        <text class="setting-arrow">â€º</text>
      </view>
    </view>
  </view>
</view>

